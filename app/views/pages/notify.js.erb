// close modal if needed
<% if defined?(close) %>
  $(".modal").modal("close");
<% end %>

<%
  if defined?(type).nil?
    classes = 'blue'
  else
    case type
      when  'alert'
        classes = 'red'
      when 'notice'
        classes = 'blue'
      when 'success'
        classes = 'green'
      else
        classes = 'blue'
    end
  end
%>

M.toast({html: "<%= message %>", displayLength: "3000", classes: "<%= classes %>"});

// rerender stuff
<% if defined?(partial_render) %>
  $('.tooltipped').tooltip('remove');
  $("#<%= partial_render_id %>").html("<%= j(render(partial_render)) %>");
  M.updateTextFields();
  $('.tooltipped').tooltip({delay: 50});
<% end %>

